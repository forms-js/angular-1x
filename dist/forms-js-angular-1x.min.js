(function(root, factory) {
  if (typeof define === 'function' && define.amd) {
    define([], factory);
  } else if (typeof exports === 'object') {
    module.exports = factory();
  } else {
    root.adaptor = factory();
  }
}(this, function() {
var adaptor;(function(e){var t;(function(e){function t(){return function(e){var t=document.createDocumentFragment();return angular.forEach(e.fields,function(e,r){var i=document.createElement("div");i.setAttribute("fjs-"+e.inputType,""),i.setAttribute("key",r),i.setAttribute("config","view['"+r+'"]'),i.className="form-group",t.appendChild(i)}),t}}e.builder=t})(t=e.services||(e.services={}))})(adaptor||(adaptor={}));var adaptor;(function(e){var t;(function(e){function t(){return{scope:!0,restrict:"AE",template:function(e,t){return'<label>{{ cfg.label }}</label><input type="text" class="form-control" fjs-validate="KEY" ng-model="model.KEY"><div class="help-block">{{attribute.errorMessages[0]}}</div>'.replace(/KEY/g,t.key)},link:function(e,t,r){var i=r.key;e.cfg=e.view.fields[i]}}}e.text=t})(t=e.fields||(e.fields={}))})(adaptor||(adaptor={}));var adaptor;(function(e){var t;(function(e){function t(){return{scope:!0,restrict:"AE",template:function(e,t){return'<label>{{ cfg.label }}</label><textarea class="form-control" fjs-validate="KEY" ng-model="model.KEY"></textarea><div class="help-block">{{attribute.errorMessages[0]}}</div>'.replace(/KEY/g,t.key)},link:function(e,t,r){var i=r.key;e.cfg=e.view.fields[i]}}}e.textarea=t})(t=e.fields||(e.fields={}))})(adaptor||(adaptor={}));var adaptor;(function(e){var t;(function(e){function t(e){return{restrict:"AE",scope:!1,require:["ngModel","^formsJs"],link:function(t,r,i,a){t.ngModel=a[0];var n=a[1],o=n.registerAttribute(i.fjsValidate);t.attribute=o,t.ngModel.$viewChangeListeners.push(function(){return console.log("Going to validate ",t.ngModel.$modelValue),o.validate().then(function(r){return console.log("and the result is!",r),t.ngModel.$setValidity("fjs",!1),e.when(!0)},function(r){return console.log(r,o.errorMessages),t.ngModel.$setValidity("fjs",!1),e.reject()})})}}}e.validate=t})(t=e.directives||(e.directives={}))})(adaptor||(adaptor={}));var adaptor;(function(e){var t;(function(e){function t(e,t){var r;return{restrict:"AE",scope:{view:"=",validation:"=",model:"="},controller:[function(){r=new formsjs.Form,this.registerAttribute=r.registerAttribute.bind(r)}],link:function(i,a){i.$watch("model",function(e){r.formData=e}),i.$watchGroup(["view","validation"],function(n){var o=n[0],l=n[1];if(void 0!==o&&void 0!==l){r.validationSchema=i.validation;var c=t(o);a[0].appendChild(c),e(a.children())(i)}})}}}e.formsjsDirective=t})(t=e.directives||(e.directives={}))})(adaptor||(adaptor={}));var adaptor;(function(e){angular.module("fjs",[]).factory("fjsBuilder",e.services.builder).directive("fjsText",e.fields.text).directive("fjsTextarea",e.fields.textarea).directive("fjsValidate",["$q",e.directives.validate]).directive("formsJs",["$compile","fjsBuilder",e.directives.formsjsDirective])})(adaptor||(adaptor={}));
return adaptor;
}));
