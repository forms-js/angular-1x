(function(root, factory) {
  if (typeof define === 'function' && define.amd) {
    define([], factory);
  } else if (typeof exports === 'object') {
    module.exports = factory();
  } else {
    root.adaptor = factory();
  }
}(this, function() {
var adaptor;(function(e){var t;(function(e){function t(){return function(e){var t=document.createDocumentFragment();return angular.forEach(e.fields,function(e,r){var i=document.createElement("div");i.setAttribute("fjs-"+e.inputType,""),i.setAttribute("key",r),i.setAttribute("config","view['"+r+'"]'),i.className="form-group",t.appendChild(i)}),t}}e.builder=t})(t=e.services||(e.services={}))})(adaptor||(adaptor={}));var adaptor;(function(e){var t;(function(e){function t(){return{scope:!0,restrict:"AE",template:function(e,t){return'<label>{{ cfg.label }}</label><input type="text" class="form-control" fjs-validate="KEY" ng-model="model.KEY"><div class="help-block">{{error}}</div>'.replace(/KEY/g,t.key)},link:function(e,t,r){var i=r.key;e.cfg=e.view.fields[i]}}}e.text=t})(t=e.fields||(e.fields={}))})(adaptor||(adaptor={}));var adaptor;(function(e){var t;(function(e){function t(e){return{restrict:"AE",scope:!1,require:["ngModel","^formsJs"],link:function(t,r,i,a){t.ngModel=a[0];var o=a[1];o.registerAttribute(i.fjsValidate),t.ngModel.$asyncValidators.fjs=function(r,a){console.log("Going to validate ",r,a);var n={};return n[i.fjsValidate]=r,o.validationService.validateField(i.fjsValidate,n,t.validation).then(function(r){return console.log("and the result is!",r),t.error="",e.when(!0)},function(r){return t.error=r[0],console.log(r),e.reject()})}}}}e.validate=t})(t=e.directives||(e.directives={}))})(adaptor||(adaptor={}));var adaptor;(function(e){var t;(function(e){function t(e,t){var r;return{restrict:"AE",scope:{view:"=",validation:"=",model:"="},controller:["$scope",function(){r=new formsjs.Form,this.validationService=r.validationService,this.registerAttribute=r.registerAttribute.bind(r)}],link:function(i,a){i.$watchGroup(["view","validation"],function(o){var n=o[0],c=o[1];if(void 0!==n&&void 0!==c){r.validationSchema=i.validation;var d=t(n);a[0].appendChild(d),e(a.children())(i)}})}}}e.formsjsDirective=t})(t=e.directives||(e.directives={}))})(adaptor||(adaptor={}));var adaptor;(function(e){angular.module("fjs",[]).factory("fjsBuilder",e.services.builder).directive("fjsText",e.fields.text).directive("fjsValidate",["$q",e.directives.validate]).directive("formsJs",["$compile","fjsBuilder",e.directives.formsjsDirective])})(adaptor||(adaptor={}));
return adaptor;
}));
